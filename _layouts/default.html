---
---
<!DOCTYPE html>
<html lang="ko" data-theme="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>{% if page.title %}{{ page.title }} â€” {{ site.title }}{% else %}{{ site.title }} Â· {{ site.description }}{% endif %}</title>
  <meta name="description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | truncate: 160 }}{% else %}{{ site.description }}{% endif %}" />
  <meta name="author" content="{{ site.author }}" />

  <!-- â˜… Open Graph -->
  {% assign og_title = page.title | default: site.title %}
  {% assign og_desc  = page.excerpt | default: site.description | strip_html | truncate: 160 %}
  {% assign og_url   = page.url | absolute_url %}
  {% if page.image %}
    {% assign og_image = page.image | absolute_url %}
  {% elsif site.og_image %}
    {% assign og_image = site.og_image | absolute_url %}
  {% else %}
    {% assign og_image = "/assets/images/og-default.jpg" | absolute_url %}
  {% endif %}

  <meta property="og:site_name"    content="{{ site.title }}" />
  <meta property="og:locale"       content="ko_KR" />
  <meta property="og:type"         content="{% if page.layout == 'post' %}article{% else %}website{% endif %}" />
  <meta property="og:title"        content="{{ og_title | escape }}" />
  <meta property="og:description"  content="{{ og_desc | escape }}" />
  <meta property="og:url"          content="{{ og_url }}" />
  <meta property="og:image"        content="{{ og_image }}" />
  <meta property="og:image:width"  content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt"    content="{{ og_title | escape }}" />
  {% if page.layout == 'post' %}
  <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}" />
  <meta property="article:modified_time"  content="{{ page.last_modified_at | default: page.date | date_to_xmlschema }}" />
  <meta property="article:author"         content="{{ site.author }}" />
  {% if page.category %}
  <meta property="article:section"        content="{{ page.category }}" />
  {% endif %}
  {% for tag in page.tags %}
  <meta property="article:tag"            content="{{ tag }}" />
  {% endfor %}
  {% endif %}

  <!-- â˜… Twitter Card -->
  <meta name="twitter:card"        content="summary_large_image" />
  <meta name="twitter:title"       content="{{ og_title | escape }}" />
  <meta name="twitter:description" content="{{ og_desc | escape }}" />
  <meta name="twitter:image"       content="{{ og_image }}" />
  <meta name="twitter:image:alt"   content="{{ og_title | escape }}" />

  <!-- Article êµ¬ì¡°í™” ë°ì´í„° -->
  {% if page.layout == 'post' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "{{ page.title | escape }}",
    "datePublished": "{{ page.date | date_to_xmlschema }}",
    "dateModified": "{{ page.last_modified_at | default: page.date | date_to_xmlschema }}",
    "author": {"@type": "Person", "name": "{{ site.author }}"},
    "publisher": {"@type": "Organization", "name": "{{ site.title }}"},
    {% if page.image %}"image": "{{ page.image | absolute_url }}",{% endif %}
    "url": "{{ page.url | absolute_url }}"
  }
  </script>
  {% endif %}

  <link rel="canonical" href="{{ page.url | absolute_url }}" />
  <meta name="google-site-verification" content="Yg-oBW33kqUu_fm4r_wgdF2HJy_65oZNGp8-dKPCwgI" />
  <meta name="naver-site-verification" content="6e6b886ed780f4f9569e2f22be8224ee8d5849c8" />

  <!-- â˜… DNS prefetch / preconnect -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="dns-prefetch" href="https://www.googletagmanager.com" />

  <!-- â˜… íˆì–´ë¡œ ì´ë¯¸ì§€ preload -->
  {% if page.url == "/" %}
  <link rel="preload" as="image" href="/assets/images/sapporo.webp" media="(min-width: 961px)" />
  <link rel="preload" as="image" href="/assets/images/sapporo-tablet.jpeg" media="(min-width: 601px) and (max-width: 960px)" />
  <link rel="preload" as="image" href="/assets/images/sapporo-mobile.jpeg" media="(max-width: 600px)" />
  {% endif %}
  {% if page.image %}
  <link rel="preload" as="image" href="{{ page.image }}" />
  {% endif %}

  <!-- CSS ë™ê¸° ë¡œë“œ (íˆì–´ë¡œ ë°°ê²½ ì¦‰ì‹œ ì ìš©) -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}" />

  <!--
    â˜… ì›¹í°íŠ¸ ì „ëµ:
    1. Cormorant Garamond â€” ì œëª©ìš©. display:optional â†’ ì²« ë¡œë“œ ì‹œ ì‹œìŠ¤í…œí°íŠ¸ fallback,
       ìºì‹œ í›„ë¶€í„° ì¦‰ì‹œ ì ìš©. FOUT/CLS ì™„ì „ ì œê±°.
    2. Noto Sans KR â€” ë³¸ë¬¸ìš©. text= íŒŒë¼ë¯¸í„°ë¡œ í•œê¸€ subsetë§Œ ìš”ì²­í•´ ìš©ëŸ‰ 90% ì ˆê°.
       display:swap â†’ í°íŠ¸ ë¡œë“œ ì „ê¹Œì§€ ì‹œìŠ¤í…œí°íŠ¸ í‘œì‹œ(ê°€ë…ì„± ìš°ì„ ).
    3. ë‘ í°íŠ¸ ëª¨ë‘ preconnect í›„ ë¹„ë™ê¸° ë¡œë“œ â†’ ë Œë” ë¸”ë¡œí‚¹ 0.
  -->

  <!-- Cormorant Garamond (ì œëª©) â€” optional: CLS ì—†ìŒ -->
  <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&display=optional"
        onload="this.onload=null;this.rel='stylesheet'" />
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&display=optional" rel="stylesheet" />
  </noscript>

  <!-- Noto Sans KR (ë³¸ë¬¸) â€” swap: ê°€ë…ì„± ìš°ì„ , subsetìœ¼ë¡œ ê²½ëŸ‰í™” -->
  <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500&display=swap&subset=korean"
        onload="this.onload=null;this.rel='stylesheet'" />
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500&display=swap&subset=korean" rel="stylesheet" />
  </noscript>

  <!-- â˜… Google Analytics defer -->
  <script defer src="https://www.googletagmanager.com/gtag/js?id=G-BQ5T1WKVT3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BQ5T1WKVT3', { 'send_page_view': false });
    window.addEventListener('load', function() { gtag('event', 'page_view'); });
  </script>

  <!-- â˜… ë‹¤í¬ëª¨ë“œ í”Œë¦¬ì»¤ ë°©ì§€ (CSS ë¡œë“œ ì „ theme ì ìš©) -->
  <script>
    (function() {
      var saved = localStorage.getItem('theme');
      var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      var theme = saved || (prefersDark ? 'dark' : 'light');
      document.documentElement.setAttribute('data-theme', theme === 'dark' ? 'dark' : '');
    })();
  </script>

  <style>
    /* â˜… Critical CSS â€” í°íŠ¸ ë¡œë“œ ì „ ë ˆì´ì•„ì›ƒ ì•ˆì •í™” */

    /* ì‹œìŠ¤í…œí°íŠ¸ fallback: Noto Sans KR ë¡œë“œ ì „ê¹Œì§€ Apple SD Gothic / Malgun Gothic ì‚¬ìš©
       â†’ í•œê¸€ì´ ê¹¨ì§€ê±°ë‚˜ ë¹ˆì¹¸ìœ¼ë¡œ ë³´ì´ì§€ ì•ŠìŒ, CLS ìµœì†Œí™” */
    body {
      font-family: 'Noto Sans KR',
        'Apple SD Gothic Neo', 'Malgun Gothic',
        -apple-system, BlinkMacSystemFont, sans-serif;
      background: #fff;
      color: #1d1d1f;
      margin: 0;
    }

    /* Cormorant Garamond fallback: Georgia â†’ ë¹„ìŠ·í•œ ì„¸ë¦¬í”„ ê³„ì—´ */
    h1, h2, h3, .font-display {
      font-family: 'Cormorant Garamond', Georgia, 'Times New Roman', serif;
    }

    [data-theme="dark"] body { background: #0a0a0a; color: #f5f5f7; }

    .site-header {
      position: sticky; top: 0; z-index: 100;
      background: rgba(255,255,255,0.85);
      backdrop-filter: saturate(180%) blur(20px);
      border-bottom: 1px solid rgba(210,210,215,0.5);
      height: 52px;
    }
    [data-theme="dark"] .site-header { background: rgba(10,10,10,0.85); }

    /* íˆì–´ë¡œ ìµœì†Œ ë ˆì´ì•„ì›ƒ â€” ì´ë¯¸ì§€ ë¡œë“œ ì „ ë¹ˆ í™”ë©´ ë°©ì§€ */
  </style>
</head>
<body>

  <header class="site-header">
    <div class="header-inner">
      <a href="{{ '/' | relative_url }}" class="logo">BROTHRONE</a>
      <nav class="desktop-nav">
        <a href="{{ '/travel-map' | relative_url }}" class="nav-map-btn">ì—¬í–‰ ì§€ë„</a>
        <a href="{{ '/categories' | relative_url }}">ì¹´í…Œê³ ë¦¬</a>
        <a href="{{ '/tags' | relative_url }}">íƒœê·¸</a>
        <a href="{{ '/series' | relative_url }}">ì‹œë¦¬ì¦ˆ</a>
        <a href="{{ '/about' | relative_url }}">About</a>
        <a href="https://blog.naver.com/brothrone" target="_blank" rel="noopener">Naver</a>
        <button class="search-btn" onclick="toggleSearch()" aria-label="ê²€ìƒ‰">ğŸ”</button>
        <button class="dark-toggle" id="darkToggle" onclick="toggleDark()" aria-label="ë‹¤í¬ëª¨ë“œ ì „í™˜"></button>
      </nav>
      <div class="mobile-nav">
        <button class="search-btn" onclick="toggleSearch()" aria-label="ê²€ìƒ‰">ğŸ”</button>
        <button class="dark-toggle" id="darkToggleMobile" onclick="toggleDark()" aria-label="ë‹¤í¬ëª¨ë“œ ì „í™˜"></button>
        <button class="hamburger" onclick="toggleMenu()" aria-label="ë©”ë‰´">â˜°</button>
      </div>
    </div>

    <div class="mobile-menu" id="mobileMenu">
      <a href="{{ '/travel-map' | relative_url }}" onclick="toggleMenu()" class="nav-map-btn">ğŸ—ºï¸ ì—¬í–‰ ì§€ë„</a>
      <a href="{{ '/categories' | relative_url }}" onclick="toggleMenu()">ì¹´í…Œê³ ë¦¬</a>
      <a href="{{ '/tags' | relative_url }}" onclick="toggleMenu()">íƒœê·¸</a>
      <a href="{{ '/series' | relative_url }}" onclick="toggleMenu()">ì‹œë¦¬ì¦ˆ</a>
      <a href="{{ '/about' | relative_url }}" onclick="toggleMenu()">About</a>
      <a href="https://blog.naver.com/brothrone" target="_blank" rel="noopener" onclick="toggleMenu()">Naver</a>
      <a href="{{ '/contact' | relative_url }}" onclick="toggleMenu()">Contact</a>
    </div>

    <!-- â˜… ê°•í™”ëœ ê²€ìƒ‰ (íƒœê·¸, ì¹´í…Œê³ ë¦¬ ì§€ì›) -->
    <div class="search-bar" id="searchBar">
      <div class="search-inner">
        <input type="text" id="searchInput" placeholder="ì œëª©, íƒœê·¸, ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰..." oninput="searchPosts()" autocomplete="off" />
        <button onclick="toggleSearch()" aria-label="ê²€ìƒ‰ ë‹«ê¸°">âœ•</button>
      </div>
      <div class="search-results" id="searchResults"></div>
    </div>

    <script>
      /* í¬ìŠ¤íŠ¸ ë°ì´í„° (íƒœê·¸, ì¹´í…Œê³ ë¦¬, ì‹œë¦¬ì¦ˆ í¬í•¨) */
      const posts = [
        {% for post in site.posts %}
        {
          title: {{ post.title | jsonify }},
          url: {{ post.url | relative_url | jsonify }},
          excerpt: {{ post.excerpt | strip_html | truncate: 120 | jsonify }},
          date: {{ post.date | date: "%Y. %m. %d" | jsonify }},
          category: {{ post.category | default: "" | jsonify }},
          tags: {{ post.tags | default: "" | jsonify }},
          series: {{ post.series | default: "" | jsonify }}
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ];

      /* â˜… ë‹¤í¬ëª¨ë“œ */
      function toggleDark() {
        var html = document.documentElement;
        var isDark = html.getAttribute('data-theme') === 'dark';
        html.setAttribute('data-theme', isDark ? '' : 'dark');
        localStorage.setItem('theme', isDark ? 'light' : 'dark');
      }

      /* ë©”ë‰´ */
      function toggleMenu() {
        document.getElementById('mobileMenu').classList.toggle('active');
      }

      /* ê²€ìƒ‰ */
      function toggleSearch() {
        var bar = document.getElementById('searchBar');
        var input = document.getElementById('searchInput');
        bar.classList.toggle('active');
        if (bar.classList.contains('active')) {
          input.focus();
        } else {
          input.value = '';
          document.getElementById('searchResults').innerHTML = '';
        }
      }

      /* ESCë¡œ ê²€ìƒ‰ ë‹«ê¸° */
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          var bar = document.getElementById('searchBar');
          if (bar.classList.contains('active')) toggleSearch();
        }
      });

      /* â˜… ê°•í™”ëœ ê²€ìƒ‰ â€” íƒœê·¸/ì¹´í…Œê³ ë¦¬/ì‹œë¦¬ì¦ˆê¹Œì§€ ê²€ìƒ‰ */
      function highlight(text, query) {
        if (!query) return text;
        var escaped = query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        return text.replace(new RegExp(escaped, 'gi'), function(m) {
          return '<mark class="search-highlight">' + m + '</mark>';
        });
      }

      function searchPosts() {
        var query = document.getElementById('searchInput').value.trim();
        var results = document.getElementById('searchResults');
        if (!query) { results.innerHTML = ''; return; }
        var q = query.toLowerCase();

        var filtered = posts.filter(function(p) {
          var tagsStr = Array.isArray(p.tags) ? p.tags.join(' ') : (p.tags || '');
          return (
            p.title.toLowerCase().includes(q) ||
            p.excerpt.toLowerCase().includes(q) ||
            tagsStr.toLowerCase().includes(q) ||
            (p.category || '').toLowerCase().includes(q) ||
            (p.series || '').toLowerCase().includes(q)
          );
        });

        if (filtered.length === 0) {
          results.innerHTML = '<p class="no-result">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì–´ìš”.</p>';
          return;
        }

        results.innerHTML = filtered.slice(0, 10).map(function(p) {
          var tagsArr = Array.isArray(p.tags) ? p.tags : (p.tags ? [p.tags] : []);
          var tagsHtml = tagsArr.length
            ? '<span class="search-result-tags">' +
              tagsArr.slice(0, 3).map(function(t) {
                return '<span class="search-result-tag">' + t + '</span>';
              }).join('') + '</span>'
            : '';
          return '<a href="' + p.url + '" class="search-result-item">' +
            '<span class="search-result-date">' + p.date + '</span>' +
            '<span class="search-result-title">' + highlight(p.title, query) + '</span>' +
            tagsHtml +
            '</a>';
        }).join('');
      }
    </script>
  </header>

  <main>{{ content }}</main>

  <!-- ë¼ì´íŠ¸ë°•ìŠ¤ ì˜¤ë²„ë ˆì´ -->
  <div class="lightbox-overlay" id="lightbox" onclick="closeLightbox(event)">
    <div class="lightbox-img-wrap" id="lightboxWrap">
      <button class="lightbox-close" onclick="closeLightboxBtn()" aria-label="ë‹«ê¸°">âœ•</button>
      <button class="lightbox-nav lightbox-prev" onclick="lightboxNav(-1, event)" aria-label="ì´ì „">â€¹</button>
      <img id="lightboxImg" src="" alt="" />
      <button class="lightbox-nav lightbox-next" onclick="lightboxNav(1, event)" aria-label="ë‹¤ìŒ">â€º</button>
      <div class="lightbox-caption" id="lightboxCaption"></div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-left">
        <span class="footer-logo">BROTHRONE</span>
        <p>Â© {{ site.time | date: "%Y" }} Â· Travel &amp; Aviation</p>
      </div>
      <div class="footer-stats">
        <span class="footer-stat">ê¸€ <strong>{{ site.posts | size }}</strong>í¸</span>
        {% assign all_tags = site.posts | map: "tags" | join: "," | split: "," %}
        <span class="footer-stat">íƒœê·¸ <strong>{{ all_tags | uniq | size }}</strong>ê°œ</span>
        {% assign all_cats = site.posts | map: "category" | uniq %}
        <span class="footer-stat">ì¹´í…Œê³ ë¦¬ <strong>{{ all_cats | size }}</strong>ê°œ</span>
      </div>
    </div>
  </footer>

  <!-- â˜… ì½ê¸°ì§„í–‰ë°” + ë§¨ìœ„ë¡œ ë²„íŠ¼ + ë¼ì´íŠ¸ë°•ìŠ¤ JS -->
  <script defer>
  document.addEventListener('DOMContentLoaded', function() {

    /* ì½ê¸° ì§„í–‰ë°” */
    if (document.querySelector('.post-content')) {
      var bar = document.createElement('div');
      bar.className = 'reading-progress';
      document.body.appendChild(bar);
      window.addEventListener('scroll', function() {
        var winScroll = document.documentElement.scrollTop || document.body.scrollTop;
        var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        bar.style.width = (winScroll / height * 100) + '%';
      }, { passive: true });
    }

    /* ë§¨ ìœ„ë¡œ ë²„íŠ¼ */
    var topBtn = document.createElement('button');
    topBtn.className = 'scroll-top';
    topBtn.innerHTML = 'â†‘';
    topBtn.setAttribute('aria-label', 'ë§¨ ìœ„ë¡œ');
    document.body.appendChild(topBtn);
    window.addEventListener('scroll', function() {
      topBtn.classList.toggle('visible', window.pageYOffset > 300);
    }, { passive: true });
    topBtn.addEventListener('click', function() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    /* â˜… ë¼ì´íŠ¸ë°•ìŠ¤ ì´ˆê¸°í™” */
    var postImgs = Array.from(document.querySelectorAll('.post-content img'));
    postImgs.forEach(function(img, idx) {
      img.setAttribute('data-idx', idx);
      img.style.cursor = 'zoom-in';
      img.addEventListener('click', function() { openLightbox(idx); });
    });

    /* â˜… TOC í™œì„± í•­ëª© í•˜ì´ë¼ì´íŠ¸ */
    var tocLinks = document.querySelectorAll('.toc-list a');
    if (tocLinks.length > 0) {
      var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            var id = entry.target.id;
            tocLinks.forEach(function(a) {
              a.classList.toggle('active', a.getAttribute('href') === '#' + id);
            });
          }
        });
      }, { rootMargin: '-20% 0px -70% 0px' });
      document.querySelectorAll('.post-content h2, .post-content h3').forEach(function(h) {
        if (h.id) observer.observe(h);
      });
    }

    /* ì™¸ë¶€ ë§í¬ ë³´ì•ˆ */
    document.querySelectorAll('a[href^="http"]').forEach(function(a) {
      if (!a.hostname || a.hostname !== location.hostname) {
        a.setAttribute('rel', 'noopener noreferrer');
      }
    });
  });

  /* â˜… ë¼ì´íŠ¸ë°•ìŠ¤ í•¨ìˆ˜ */
  var lbImages = [];
  var lbCurrent = 0;

  function openLightbox(idx) {
    lbImages = Array.from(document.querySelectorAll('.post-content img'));
    lbCurrent = idx;
    showLightboxImg(lbCurrent);
    document.getElementById('lightbox').classList.add('open');
    document.body.style.overflow = 'hidden';
  }

  function showLightboxImg(idx) {
    var img = lbImages[idx];
    document.getElementById('lightboxImg').src = img.src;
    document.getElementById('lightboxImg').alt = img.alt || '';
    document.getElementById('lightboxCaption').textContent = img.alt || '';
    // ì´ì „/ë‹¤ìŒ ë²„íŠ¼ í‘œì‹œ
    document.querySelector('.lightbox-prev').style.display = lbImages.length > 1 ? 'flex' : 'none';
    document.querySelector('.lightbox-next').style.display = lbImages.length > 1 ? 'flex' : 'none';
  }

  function closeLightbox(e) {
    if (e.target === document.getElementById('lightbox')) {
      closeLightboxBtn();
    }
  }

  function closeLightboxBtn() {
    document.getElementById('lightbox').classList.remove('open');
    document.body.style.overflow = '';
  }

  function lightboxNav(dir, e) {
    e.stopPropagation();
    lbCurrent = (lbCurrent + dir + lbImages.length) % lbImages.length;
    showLightboxImg(lbCurrent);
  }

  /* í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ */
  document.addEventListener('keydown', function(e) {
    var lb = document.getElementById('lightbox');
    if (!lb.classList.contains('open')) return;
    if (e.key === 'ArrowLeft') lightboxNav(-1, { stopPropagation: function(){} });
    if (e.key === 'ArrowRight') lightboxNav(1, { stopPropagation: function(){} });
    if (e.key === 'Escape') closeLightboxBtn();
  });

  /* WebP ìë™ êµì²´ */
  document.querySelectorAll('.post-content img').forEach(function(img) {
    if (!img.hasAttribute('loading')) img.setAttribute('loading', 'lazy');
    var src = img.getAttribute('src');
    if (src && src.match(/\.(jpg|jpeg|png)$/i)) {
      var webpSrc = src.replace(/\.(jpg|jpeg|png)$/i, '.webp');
      var test = new Image();
      test.onload = function() { img.src = webpSrc; };
      test.src = webpSrc;
    }
  });
  </script>

</body>
</html>
