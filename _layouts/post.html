---
layout: default
---

{% if page.image %}
<!-- 대표 사진 preload -->
<link rel="preload" as="image" href="{{ page.image }}" />
{% endif %}

<div class="container">
  <div class="post-header">
    <div class="post-meta">
      <span class="post-date">{{ page.date | date: "%Y. %m. %d" }}</span>
      {% if page.tags %}
        {% for tag in page.tags %}
          <span class="post-tag">{{ tag }}</span>
        {% endfor %}
      {% endif %}
    </div>
    <h1>{{ page.title }}</h1>
  </div>

  <article class="post-content">
    {{ content }}
    <a href="{{ '/' | relative_url }}" class="back-link">← 목록으로 돌아가기</a>
  </article>

  <!-- 관련글 -->
  {% assign related_posts = site.posts | where: "category", page.category | where_exp: "post", "post.url != page.url" | limit: 4 %}
  {% if related_posts.size > 0 %}
  <div class="related-posts">
    <h2>관련 글</h2>
    <div class="related-grid">
      {% for post in related_posts %}
      {% if post.naver_url %}
      <a href="{{ post.naver_url }}" target="_blank" class="related-card">
      {% else %}
      <a href="{{ post.url | relative_url }}" class="related-card">
      {% endif %}
        <div class="related-card-meta">{{ post.date | date: "%Y. %m. %d" }}</div>
        <div class="related-card-title">{{ post.title }}</div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- 댓글 섹션 -->
  <div class="comments">
    <script src="https://giscus.app/client.js"
            data-repo="brothrone/my-blog"
            data-repo-id="R_kgDORSHfwA"
            data-category="Announcements"
            data-category-id="DIC_kwDORSHfwM4C2nYW"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="bottom"
            data-theme="preferred_color_scheme"
            data-lang="ko"
            crossorigin="anonymous"
            async>
    </script>
  </div>
</div>

<!-- 글 내 이미지 lazy loading -->
<script>
  document.querySelectorAll('.post-content img').forEach(img => {
    img.setAttribute('loading', 'lazy');
  });
</script>
