---
layout: default
---

{% if page.image %}
<link rel="preload" as="image" href="{{ page.image }}" />
{% endif %}

<div class="container">
  <div class="post-header">
    <div class="post-meta">
      <span class="post-date">{{ page.date | date: "%Y. %m. %d" }}</span>
      {% if page.category %}
        <a href="{{ '/categories/' | append: page.category | relative_url }}" class="post-tag">{{ page.category }}</a>
      {% endif %}
      {% if page.tags %}
        {% for tag in page.tags %}
          <a href="{{ '/tags/' | append: tag | relative_url }}" class="post-tag">#{{ tag }}</a>
        {% endfor %}
      {% endif %}
    </div>
    <h1>{{ page.title }}</h1>
  </div>

  <!-- â˜… ì‹œë¦¬ì¦ˆ ë°•ìŠ¤ -->
  {% if page.series %}
    {% assign series_posts = site.posts | where: "series", page.series | sort: "series_no" %}
    {% if series_posts.size > 1 %}
    <div class="series-box" style="padding: 24px 28px; margin: 0 auto 32px; max-width: 720px; margin-left: auto; margin-right: auto;">
      <div class="series-box-header">
        <div>
          <div class="series-box-title">ì‹œë¦¬ì¦ˆ</div>
          <div class="series-box-name">{{ page.series }}</div>
        </div>
        <button class="series-toggle" onclick="toggleSeries(this)">ëª©ë¡ ë³´ê¸°</button>
      </div>
      <div class="series-list" id="seriesList">
        {% for sp in series_posts %}
        <a href="{{ sp.url | relative_url }}" class="series-item {% if sp.url == page.url %}current{% endif %}">
          <span class="num">{{ forloop.index }}</span>
          <span>{{ sp.title }}</span>
        </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  {% endif %}

  <!-- â˜… ëª©ì°¨ (TOC) â€” ìë™ ìƒì„± -->
  <div class="toc-wrap" id="tocWrap" style="display:none;">
    <div class="toc-box" id="tocBox">
      <div class="toc-header" onclick="toggleToc()">
        <span class="toc-title">ğŸ“‹ ëª©ì°¨</span>
        <span class="toc-arrow">â–¼</span>
      </div>
      <nav class="toc-list" id="tocList"></nav>
    </div>
  </div>

  <article class="post-content" id="postContent">
    {{ content }}
    <a href="{{ '/' | relative_url }}" class="back-link">â† ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
  </article>

  <!-- â˜… ì†Œì…œ ê³µìœ  ë²„íŠ¼ -->
  <div class="share-buttons">
    <span class="share-label">ê³µìœ í•˜ê¸°</span>
    <button class="share-btn kakao" onclick="shareKakao()" aria-label="ì¹´ì¹´ì˜¤í†¡ ê³µìœ ">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 3C6.5 3 2 6.6 2 11c0 2.8 1.9 5.3 4.7 6.7-.2.8-.6 2.7-.7 3.1 0 .2.1.4.3.4.1 0 .3-.1.4-.2.6-.4 3.3-2.1 4.3-2.7.3 0 .7.1 1 .1 5.5 0 10-3.6 10-8S17.5 3 12 3z"/>
      </svg>
    </button>
    <button class="share-btn twitter" onclick="shareTwitter()" aria-label="X(íŠ¸ìœ„í„°) ê³µìœ ">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
      </svg>
    </button>
    <button class="share-btn facebook" onclick="shareFacebook()" aria-label="í˜ì´ìŠ¤ë¶ ê³µìœ ">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
      </svg>
    </button>
    <button class="share-btn copy" onclick="copyURL()" aria-label="URL ë³µì‚¬" id="copyBtn">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </button>
    <button class="share-btn" onclick="shareNative()" aria-label="ê³µìœ " id="nativeShareBtn" style="display:none;">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="18" cy="5" r="3"></circle>
        <circle cx="6" cy="12" r="3"></circle>
        <circle cx="18" cy="19" r="3"></circle>
        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
      </svg>
    </button>
  </div>

  <!-- â˜… ì´ì „ê¸€/ë‹¤ìŒê¸€ ë„¤ë¹„ê²Œì´ì…˜ -->
  <div class="post-nav">
    {% if page.previous.url %}
    <a href="{{ page.previous.url | relative_url }}" class="post-nav-item prev">
      <div class="post-nav-label">â† ì´ì „ ê¸€</div>
      <div class="post-nav-title">{{ page.previous.title }}</div>
    </a>
    {% else %}
    <div></div>
    {% endif %}
    {% if page.next.url %}
    <a href="{{ page.next.url | relative_url }}" class="post-nav-item next">
      <div class="post-nav-label" style="justify-content: flex-end;">ë‹¤ìŒ ê¸€ â†’</div>
      <div class="post-nav-title">{{ page.next.title }}</div>
    </a>
    {% else %}
    <div></div>
    {% endif %}
  </div>

  <!-- â˜… ê´€ë ¨ê¸€ -->
  {% assign related = site.posts | where: "category", page.category | where_exp: "p", "p.url != page.url" | limit: 4 %}
  {% if related.size > 0 %}
  <div class="related-posts">
    <h2>ê´€ë ¨ ê¸€</h2>
    <div class="related-grid">
      {% for p in related %}
      <a href="{{ p.url | relative_url }}" class="related-card">
        <div class="related-card-meta">{{ p.date | date: "%Y. %m. %d" }}</div>
        <div class="related-card-title">{{ p.title }}</div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- Disqus -->
  <div class="comments">
    <div id="disqus_thread"></div>
    <script>
    var disqus_config = function () {
      this.page.url = "{{ page.url | absolute_url }}";
      this.page.identifier = "{{ page.id }}";
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://brothrone-travel.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
    </script>
  </div>
</div>

<script>
  var pageUrl = "{{ page.url | absolute_url }}";
  var pageTitle = "{{ page.title | escape }}";
  var pageImage = "{{ page.image | absolute_url }}";
  var pageDesc = "{{ page.excerpt | strip_html | truncate: 100 | escape }}";

  /* â˜… ì‹œë¦¬ì¦ˆ í† ê¸€ */
  function toggleSeries(btn) {
    var list = document.getElementById('seriesList');
    var open = list.classList.toggle('open');
    btn.textContent = open ? 'ëª©ë¡ ì ‘ê¸°' : 'ëª©ë¡ ë³´ê¸°';
    // í˜„ì¬ ê¸€ ìœ„ì¹˜ë¡œ ìŠ¤í¬ë¡¤
    if (open) {
      var cur = list.querySelector('.series-item.current');
      if (cur) cur.scrollIntoView({ block: 'nearest' });
    }
  }

  /* â˜… TOC ìë™ ìƒì„± */
  document.addEventListener('DOMContentLoaded', function() {
    var content = document.getElementById('postContent');
    var headings = content.querySelectorAll('h2, h3');
    if (headings.length < 2) return; // í—¤ë”© 2ê°œ ë¯¸ë§Œì´ë©´ TOC ìˆ¨ê¹€

    var tocList = document.getElementById('tocList');
    var ol = document.createElement('ol');
    ol.style.cssText = 'list-style:none;padding:12px 0 0;';

    var currentH2Li = null;
    var subUl = null;

    headings.forEach(function(h, idx) {
      // ID ìë™ ë¶€ì—¬
      if (!h.id) {
        h.id = 'heading-' + idx;
      }
      var a = document.createElement('a');
      a.href = '#' + h.id;
      a.textContent = h.textContent;
      a.addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById(h.id).scrollIntoView({ behavior: 'smooth', block: 'start' });
        // ëª¨ë°”ì¼ ì˜¤í”„ì…‹ ë³´ì •
        window.scrollBy(0, -60);
      });

      var li = document.createElement('li');
      li.appendChild(a);

      if (h.tagName === 'H2') {
        ol.appendChild(li);
        currentH2Li = li;
        subUl = null;
      } else if (h.tagName === 'H3') {
        if (!subUl) {
          subUl = document.createElement('ul');
          subUl.style.cssText = 'list-style:none;padding:0;';
          if (currentH2Li) currentH2Li.appendChild(subUl);
          else ol.appendChild(subUl);
        }
        subUl.appendChild(li);
      }
    });

    tocList.appendChild(ol);
    document.getElementById('tocWrap').style.display = 'block';
    // ê¸°ë³¸ì ìœ¼ë¡œ ì—´ì–´ë‘ê¸°
    document.getElementById('tocBox').classList.add('open');
  });

  function toggleToc() {
    document.getElementById('tocBox').classList.toggle('open');
  }

  /* â˜… ì¹´ì¹´ì˜¤ ê³µìœ  */
  function initKakao() {
    if (window.Kakao && !window.Kakao.isInitialized()) {
      Kakao.init('633bea9d67448561d14b00f31281c957'); // â† ì—¬ê¸°ì— JavaScript ì•± í‚¤ ì…ë ¥
    }
  }
  function shareKakao() {
    if (!window.Kakao || !window.Kakao.isInitialized()) {
      copyURL();
      return;
    }
    Kakao.Share.sendDefault({
      objectType: 'feed',
      content: {
        title: pageTitle,
        description: pageDesc,
        imageUrl: pageImage,
        link: { mobileWebUrl: pageUrl, webUrl: pageUrl },
      },
      buttons: [{ title: 'ê¸€ ë³´ê¸°', link: { mobileWebUrl: pageUrl, webUrl: pageUrl } }],
    });
  }
  function shareTwitter() {
    window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(pageTitle) + '&url=' + encodeURIComponent(pageUrl), '_blank', 'width=550,height=450,noopener');
  }
  function shareFacebook() {
    window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(pageUrl), '_blank', 'width=550,height=450,noopener');
  }
  function copyURL() {
    var btn = document.getElementById('copyBtn');
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(pageUrl).then(function() { showCopied(btn); }).catch(function() { fallbackCopy(btn); });
    } else {
      fallbackCopy(btn);
    }
  }
  function fallbackCopy(btn) {
    var ta = document.createElement('textarea');
    ta.value = pageUrl;
    ta.style.cssText = 'position:fixed;opacity:0;';
    document.body.appendChild(ta);
    ta.select();
    try { document.execCommand('copy'); showCopied(btn); } catch(e) { alert('URL: ' + pageUrl); }
    document.body.removeChild(ta);
  }
  function showCopied(btn) {
    btn.classList.add('copied');
    btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>';
    setTimeout(function() {
      btn.classList.remove('copied');
      btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>';
    }, 2000);
  }
  function shareNative() {
    if (navigator.share) {
      navigator.share({ title: pageTitle, text: pageDesc, url: pageUrl });
    }
  }
  if (navigator.share) {
    document.getElementById('nativeShareBtn').style.display = 'flex';
  }

  // ì¹´ì¹´ì˜¤ SDK ë¹„ë™ê¸° ë¡œë“œ
  (function() {
    var s = document.createElement('script');
    s.src = 'https://developers.kakao.com/sdk/js/kakao.min.js';
    s.defer = true;
    s.onload = initKakao;
    document.head.appendChild(s);
  })();
</script>
