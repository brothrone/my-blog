---
layout: en-default
---

<button class="toc-toggle" id="tocToggle" aria-label="Table of contents">
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <line x1="3" y1="6" x2="21" y2="6"></line>
    <line x1="3" y1="12" x2="15" y2="12"></line>
    <line x1="3" y1="18" x2="18" y2="18"></line>
  </svg>
</button>

<div class="toc-popup" id="tocPanel">
  <div class="toc-popup-header">
    <span>Contents</span>
    <button class="toc-close" id="tocClose" aria-label="Close">✕</button>
  </div>
  <nav class="toc-nav" id="tocNav"></nav>
</div>

<div class="container">
  <div class="post-header">
    <div class="post-meta">
      <span class="post-date">{{ page.date | date: "%b %d, %Y" }}</span>
      {% if page.tags %}
        {% for tag in page.tags %}
          <span class="post-tag">{{ tag }}</span>
        {% endfor %}
      {% endif %}
    </div>
    <h1>{{ page.title }}</h1>
  </div>

  <article class="post-content">
    {{ content }}
    <a href="/en/" class="back-link">← Back to list</a>
  </article>

  <nav class="post-nav">
    {% assign en_posts = site.posts | where: "lang", "en" %}
    {% assign current_index = 0 %}
    {% for post in en_posts %}
      {% if post.url == page.url %}{% assign current_index = forloop.index0 %}{% endif %}
    {% endfor %}
    {% assign prev_index = current_index | minus: 1 %}
    {% assign next_index = current_index | plus: 1 %}
    {% if prev_index >= 0 %}
      {% assign prev_post = en_posts[prev_index] %}
      <a href="{{ prev_post.url }}" class="post-nav-item post-nav-prev">
        <span class="post-nav-label">← Previous</span>
        <span class="post-nav-title">{{ prev_post.title }}</span>
      </a>
    {% else %}
      <div class="post-nav-item post-nav-empty"></div>
    {% endif %}
    {% if next_index < en_posts.size %}
      {% assign next_post = en_posts[next_index] %}
      <a href="{{ next_post.url }}" class="post-nav-item post-nav-next">
        <span class="post-nav-label">Next →</span>
        <span class="post-nav-title">{{ next_post.title }}</span>
      </a>
    {% else %}
      <div class="post-nav-item post-nav-empty"></div>
    {% endif %}
  </nav>

  <div class="share-buttons">
    <span class="share-label">Share</span>
    <button class="share-btn twitter" onclick="shareTwitter()" aria-label="Share on X">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
      </svg>
    </button>
    <button class="share-btn facebook" onclick="shareFacebook()" aria-label="Share on Facebook">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
      </svg>
    </button>
    <button class="share-btn copy" onclick="copyURL()" aria-label="Copy URL" id="copyBtn">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </button>
  </div>

  {% assign related = site.posts | where: "lang", "en" | where: "category", page.category | where_exp: "post", "post.url != page.url" | limit: 4 %}
  {% if related.size > 0 %}
  <div class="related-posts">
    <h2>Related Posts</h2>
    <div class="related-grid">
      {% for post in related %}
      <a href="{{ post.url }}" class="related-card">
        <div class="related-card-meta">{{ post.date | date: "%b %d, %Y" }}</div>
        <div class="related-card-title">{{ post.title }}</div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <div class="comments">
    <div id="disqus_thread"></div>
    <script>
    var disqus_config = function () {
      this.page.url = "{{ page.url | absolute_url }}";
      this.page.identifier = "{{ page.id }}";
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://brothrone-travel.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
    </script>
  </div>
</div>

<style>
.post-nav {
  display: flex; gap: 12px;
  max-width: 720px; margin: 0 auto 32px;
  padding: 32px 40px 0;
  border-top: 1px solid var(--border);
}
.post-nav-item {
  flex: 1; display: flex; flex-direction: column; gap: 6px;
  padding: 16px 20px; border: 1px solid var(--border);
  border-radius: 12px; text-decoration: none; color: var(--text);
  transition: background 0.2s, border-color 0.2s; min-width: 0;
}
.post-nav-item:hover { background: var(--surface); border-color: var(--text-muted); }
.post-nav-empty { border: none; background: none !important; }
.post-nav-next { text-align: right; }
.post-nav-label { font-size: 0.75rem; color: var(--text-muted); letter-spacing: 0.05em; }
.post-nav-title { font-size: 0.9rem; font-weight: 500; line-height: 1.4; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
@media (max-width: 600px) {
  .post-nav { flex-direction: column; padding: 24px 20px 0; }
  .post-nav-next { text-align: left; }
}
</style>

<script>
  const pageUrl = {{ page.url | absolute_url | jsonify }};
  const pageTitle = {{ page.title | jsonify }};
  const pageDescription = {{ page.excerpt | strip_html | truncate: 100 | jsonify }};

  document.addEventListener('DOMContentLoaded', function() {
    const headings = document.querySelectorAll('.post-content h2, .post-content h3');
    const tocNav = document.getElementById('tocNav');
    const tocToggle = document.getElementById('tocToggle');
    if (headings.length === 0) { tocToggle.style.display = 'none'; return; }
    headings.forEach((h, i) => {
      if (!h.id) h.id = 'heading-' + i;
      const a = document.createElement('a');
      a.href = '#' + h.id;
      a.textContent = h.textContent;
      if (h.tagName === 'H3') a.classList.add('toc-h3');
      a.addEventListener('click', closeToc);
      tocNav.appendChild(a);
    });
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const link = tocNav.querySelector(`a[href="#${entry.target.id}"]`);
        if (link) link.classList.toggle('active', entry.isIntersecting);
      });
    }, { rootMargin: '-20% 0px -70% 0px' });
    headings.forEach(h => observer.observe(h));
  });

  function openToc() { document.getElementById('tocPanel').classList.add('open'); }
  function closeToc() { document.getElementById('tocPanel').classList.remove('open'); }
  function toggleToc(e) { e.stopPropagation(); document.getElementById('tocPanel').classList.toggle('open'); }
  document.getElementById('tocToggle').addEventListener('click', toggleToc);
  document.getElementById('tocClose').addEventListener('click', function(e) { e.stopPropagation(); closeToc(); });
  document.addEventListener('click', function(e) {
    const panel = document.getElementById('tocPanel');
    if (panel.classList.contains('open') && !panel.contains(e.target)) closeToc();
  });

  function shareTwitter() { window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(pageTitle) + '&url=' + encodeURIComponent(pageUrl), '_blank', 'width=550,height=450,noopener,noreferrer'); }
  function shareFacebook() { window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(pageUrl), '_blank', 'width=550,height=450,noopener,noreferrer'); }
  function copyURL() {
    const btn = document.getElementById('copyBtn');
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(pageUrl).then(() => showCopied(btn)).catch(() => fallbackCopy(btn));
    } else fallbackCopy(btn);
  }
  function fallbackCopy(btn) {
    const t = document.createElement('textarea');
    t.value = pageUrl; t.style.cssText = 'position:fixed;opacity:0;';
    document.body.appendChild(t); t.select();
    try { document.execCommand('copy'); showCopied(btn); } catch(e) { alert('URL: ' + pageUrl); }
    document.body.removeChild(t);
  }
  function showCopied(btn) {
    btn.classList.add('copied');
    btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>';
    setTimeout(() => {
      btn.classList.remove('copied');
      btn.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>';
    }, 2000);
  }
</script>
